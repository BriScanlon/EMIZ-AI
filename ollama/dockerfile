FROM ollama/ollama:latest

# Copy the Modelfile into the container
COPY Modelfile /app/Modelfile

# Set working directory
WORKDIR /app

# Expose default port for Ollama
EXPOSE 11434

# Start Ollama server and create the model if it doesn't exist
CMD ollama serve & \
  sleep 5 && \
  ollama create -f Modelfile phi4 || echo "Model already created" && \
  wait
